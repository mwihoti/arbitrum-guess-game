(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9203],{23874:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/game",function(){return n(22355)}])},22355:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var a=n(85893),s=n(67294),r=n(55967),i=n(92321),u=n(18076),l=n(81134),o=n(86900),d=n(39625),c=n(11163);let m=JSON.parse('{"Mt":[{"inputs":[{"internalType":"address","name":"initialOwner","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"OwnableInvalidOwner","type":"error"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"OwnableUnauthorizedAccount","type":"error"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"player","type":"address"},{"indexed":false,"internalType":"uint256","name":"guessedNumber","type":"uint256"},{"indexed":false,"internalType":"bool","name":"won","type":"bool"}],"name":"NumberGuessed","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"player","type":"address"},{"indexed":false,"internalType":"uint256","name":"points","type":"uint256"}],"name":"PointsAwarded","type":"event"},{"inputs":[],"name":"betAmount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_player","type":"address"}],"name":"getPoints","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_guess","type":"uint256"}],"name":"guess","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"playerPoints","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_number","type":"uint256"}],"name":"setNumber","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"}]}');var p=n(39883);function y(e){let{isOpen:t,onClose:n,points:r}=e;return((0,s.useEffect)(()=>{if(t){(0,p.Z)({particleCount:100,spread:70,origin:{y:.6}});let e=setTimeout(()=>{n()},5e3);return()=>clearTimeout(e)}},[t,n]),t)?(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4 transform animate-bounce",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold mb-4",children:"\uD83C\uDF89 Congratulations! \uD83C\uDF89"}),(0,a.jsx)("p",{className:"text-xl mb-4",children:"You guessed the correct number!"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600 mb-4",children:"+15 Points Earned!"}),(0,a.jsxs)("p",{className:"text-gray-600 text-sm",children:["Total Points: ",r]}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-4",children:"The game will reset in 5 seconds..."})]})})}):null}function b(){let[e,t]=(0,s.useState)(""),[n,p]=(0,s.useState)(""),[b,f]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[w,h]=(0,s.useState)(null),[N,v]=(0,s.useState)(!1),{address:T,isConnected:j,chainId:E}=(0,i.m)(),k=(0,u.t)(),{data:P}=(0,l.p)(),C=(0,c.useRouter)(),M="0xb72367E5819f8d60548328172EcDfCa4447f0653";(0,s.useEffect)(()=>{j||C.push("/")},[j,C]);let _=async()=>{if(M&&T)try{let e=await k.readContract({address:M,abi:m.Mt,functionName:"getPoints",args:[T]});h(e.toString())}catch(e){console.error("Error getting player points:",e)}};(0,s.useEffect)(()=>{(async()=>{if(j&&E===o.Z.id&&M)try{let e=await k.readContract({address:M,abi:m.Mt,functionName:"betAmount"});f(e),await _()}catch(e){console.error("Error getting contract values:",e),p("Error loading contract values. Please try again.")}})()},[j,E,k,M,T]);let O=async n=>{if(n.preventDefault(),!j){p("Please connect your wallet first");return}if(E!==o.Z.id){p("Please switch to Arbitrum Sepolia network");return}if(!e||1>parseInt(e)||parseInt(e)>10){p("Please enter a number between 1 and 10");return}if(!P||!M||!b){p("Wallet not connected properly or contract values not loaded");return}g(!0);try{let{request:t}=await k.simulateContract({address:M,abi:m.Mt,functionName:"guess",args:[BigInt(e)],value:b,account:T}),n=await P.writeContract(t);p("Transaction sent! ...");let a=await k.waitForTransactionReceipt({hash:n}),s=await k.getContractEvents({address:M,abi:m.Mt,eventName:"NumberGuessed",fromBlock:a.blockNumber,toBlock:a.blockNumber});if(s&&s.length>0){let{won:e}=s[0].args;await _(),e?v(!0):p("\uD83D\uDE14 Sorry, your guess was incorrect. Try again!")}else p("No event found. Please check the transaction on the block explorer.")}catch(e){console.error("Error making guess:",e),e instanceof Error?e.message.includes("user rejected")?p("Transaction cancelled"):e.message.includes("insufficient funds")?p("Error: Insufficient funds in your wallet"):e.message.includes("Incorrect bet amount")?p("Please send exactly ".concat(b?(0,d.d)(b):"0"," ETH as bet amount")):p("Error making guess. Please try again."):p("An unknown error occurred. Please try again.")}finally{g(!1),t("")}};return(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-b from-gray-900 to-gray-800",children:[(0,a.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-96",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Guess the Number"}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(r.NL,{})}),j&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2 mb-4 text-sm text-center",children:[(0,a.jsxs)("div",{className:"text-gray-600",children:["Bet amount: ",b?(0,d.d)(b):"0"," ETH"]}),(0,a.jsxs)("div",{className:"text-green-600 font-medium",children:["Your Points: ",null!==w?w:"0"]})]}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"guess",className:"block text-sm font-medium text-gray-700",children:"Enter your guess (1-10):"}),(0,a.jsx)("input",{type:"number",id:"guess",min:"1",max:"10",value:e,onChange:e=>t(e.target.value),required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsx)("button",{type:"submit",disabled:x,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ".concat(x?"opacity-50 cursor-not-allowed":""),children:x?"Submitting...":"Submit Guess"})]})]}),n&&(0,a.jsx)("div",{className:"mt-4 text-center text-sm ".concat(n.includes("Congratulations")?"text-green-600":n.includes("Error")?"text-red-600":"text-gray-600"),children:n})]}),(0,a.jsx)(y,{isOpen:N,onClose:()=>v(!1),points:w})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[3971,2888,9774,179],()=>t(23874)),_N_E=e.O()}]);